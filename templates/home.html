{% extends "layout.html" %}


{% block content %}

    <header>
        <h1>Media Catalog Dashboard</h1>
    </header>

    <!--search section -->
    <section class="search-container">
        <h2>Find Media</h2>
        <form action="/search" method="GET">
            <input type="text" name="name" placeholder="Search by name...">
            <button type="submit">Search</button>
        </form>
    <!-- Link to Search Page -->
    <p><a class="link-btn"  href="{{ url_for('search') }}"> Advanced:Search by location</a></p>
    </section>

    <!--Recently added section -->

    <h3>Recently Added dvds</h3>
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Type</th>
                <th>Location</th>
                <th>Purchase Date</th>
            </tr>
        </thead>
        <tbody>
            {% for dvd in dvds%}
            <tr>
                <td><strong>{{ dvd['title'] }}</strong></td>
                <td>{{ dvd['type'] }}</td>
                <td><code>{{ dvd['location_label'] }}</code></td>
                <td>{{ dvd['purchase_date'] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!--Stats section -->

    <h1>Library Overview</h1>
    <div class="stats-grid">
        <div class="stat-card">
            <h4>Total Media in Collection</h4>
            <div class="stat-value">{{ counts[0].count }} Items</div>
        </div>

        <div class="stat-card">
            <h4>Media Types</h4>
            <ul style="list-style: none; padding: 0;">
                {% for item in types %}
                    <li><strong>{{ item.type }}:</strong> {{ item.count }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stat-card">
            <h4>Genres</h4>
            <ul style="list-style: none; padding: 0;">
                {% for item in genres %}
                    <li><strong>{{ item.genre }}:</strong> {{ item.count }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stat-card">
            <h4>Cost</h4>
            <ul style="list-style: none; padding: 0;">
                {% for item in costs %}
                    <li><strong>{{ item.type }}:</strong> ${{ "{:,.2f}".format(item.sum) }}</li>
                {% endfor %}
            </ul>
        </div>        
    </div>

{% endblock %}
